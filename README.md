# Fast Data Agent

> åŸºäº LangGraph çš„ AI æ•°æ®åˆ†æå¹³å°

## âœ¨ ç‰¹æ€§

- ğŸ¤– **LangGraph Agent** - æ™ºèƒ½æ•°æ®åˆ†æåŠ©æ‰‹
- ğŸ—„ï¸ **å¤šæ•°æ®æºæ”¯æŒ** - MySQL, PostgreSQL, CSV, Excel ç­‰
- ğŸ’¬ **å¯¹è¯å¼åˆ†æ** - è‡ªç„¶è¯­è¨€é©±åŠ¨çš„æ•°æ®æ¢ç´¢
- ğŸ“ˆ **å¯è§†åŒ–** - Plotly å›¾è¡¨æ¸²æŸ“
- ğŸ”’ **å®‰å…¨æ‰§è¡Œ** - Python/SQL ä»£ç æ²™ç®±éš”ç¦»

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯ (React + Plotly)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ•°æ®ç®¡ç†     â”‚  â”‚ ä¼šè¯ç®¡ç†     â”‚  â”‚ å¯¹è¯åˆ†æç•Œé¢         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åç«¯ (FastAPI + LangGraph)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    LangGraph Agent                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ execute_sql  â”‚  â”‚execute_pythonâ”‚  â”‚ generate_chartâ”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®å±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚ MinIO        â”‚  â”‚ ç”¨æˆ·æ•°æ®åº“           â”‚  â”‚
â”‚  â”‚ (å…ƒæ•°æ®å­˜å‚¨) â”‚  â”‚ (æ–‡ä»¶å­˜å‚¨)   â”‚  â”‚ (MySQL/PG)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
fast-data-agent/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                    # API è·¯ç”±
â”‚   â”œâ”€â”€ models/                 # SQLAlchemy æ¨¡å‹
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ repositories/           # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ schemas/                # Pydantic éªŒè¯æ¨¡å‹
â”‚   â”œâ”€â”€ core/                   # é…ç½®ã€å®‰å…¨ã€æ•°æ®åº“
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°å’Œ Agent å·¥å…·
â”œâ”€â”€ sandbox_runtime/            # Python æ²™ç›’æœåŠ¡ (Docker)
â”œâ”€â”€ web/                        # React å‰ç«¯
â”œâ”€â”€ scripts/                    # è„šæœ¬å·¥å…·
â””â”€â”€ tests/                      # æµ‹è¯•ä»£ç 
```

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹

```
DatabaseConnection (æ•°æ®åº“è¿æ¥)
  â”‚ 1:N
  â–¼
RawData (æ•°æ®å¯¹è±¡)          UploadedFile (ä¸Šä¼ æ–‡ä»¶)
  â”‚                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ M:N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      SessionRawData (ä¼šè¯-æ•°æ®å…³è”)
              â”‚ N:1
              â–¼
      AnalysisSession (åˆ†æä¼šè¯)
              â”‚ 1:N
              â–¼
        ChatMessage (å¯¹è¯æ¶ˆæ¯)
```

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **DatabaseConnection** | æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆMySQL/PostgreSQLï¼‰ |
| **RawData** | æ•°æ®å¯¹è±¡ï¼Œç™»è®°åº“è¡¨æˆ–æ–‡ä»¶çš„åŸå§‹æ•°æ®ç»“æ„ |
| **AnalysisSession** | åˆ†æä¼šè¯ï¼Œå¯å…³è”å¤šä¸ªæ•°æ®å¯¹è±¡è¿›è¡Œå¯¹è¯å¼åˆ†æ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Docker & Docker Compose
- OpenAI API Keyï¼ˆæˆ–å…¼å®¹ APIï¼‰

### 2. é…ç½®ç¯å¢ƒ

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd fast-data-agent

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env å¡«å…¥ OPENAI_API_KEY
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
docker compose --profile migration up migrate

# æ„å»ºå‰ç«¯
cd web && pnpm install && pnpm build
```

### 4. è®¿é—®åº”ç”¨

- **Web ç•Œé¢**: http://localhost
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **MinIO æ§åˆ¶å°**: http://localhost:9001 (admin/admin123456)

## ğŸ“– éƒ¨ç½²æŒ‡å—

### Docker ä¸€é”®éƒ¨ç½²

```bash
# 1. å‡†å¤‡ç¯å¢ƒå˜é‡
cp env.example .env
vim .env  # ä¿®æ”¹ OPENAI_API_KEY å’Œ SECRET_KEY

# 2. å¯åŠ¨æœåŠ¡
docker compose up -d

# 3. æ•°æ®åº“è¿ç§»
docker compose --profile migration up migrate

# 4. æ„å»ºå‰ç«¯
cd web && pnpm install && pnpm build
cd ..

# 5. é‡å¯ nginx åŠ è½½å‰ç«¯
docker compose restart nginx
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£… uvï¼ˆå¦‚æœªå®‰è£…ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# å®‰è£…ä¾èµ–
uv sync

# å¯åŠ¨åŸºç¡€è®¾æ–½
docker compose up -d postgres minio minio-init sandbox

# å¯åŠ¨åç«¯
make dev

# å¯åŠ¨å‰ç«¯ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd web && pnpm dev
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
make dev              # å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
make test             # è¿è¡Œæµ‹è¯•
make check            # ä»£ç è´¨é‡æ£€æŸ¥

# æ²™ç›’ç®¡ç†
make sandbox-build    # æ„å»ºæ²™ç›’é•œåƒ
make sandbox-start    # å¯åŠ¨æ²™ç›’å®¹å™¨
make sandbox-status   # æŸ¥çœ‹æ²™ç›’çŠ¶æ€

# å‰ç«¯
cd web && pnpm dev    # å¼€å‘æ¨¡å¼
cd web && pnpm build  # ç”Ÿäº§æ„å»º

# èµ„æºç®¡ç†
make reset            # é‡ç½®æ‰€æœ‰èµ„æº
```

## ğŸ”§ æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Nginx | 80 | Web å…¥å£ï¼ˆå‰ç«¯ + API ä»£ç†ï¼‰ |
| åç«¯ API | 8000 | FastAPI åº”ç”¨ |
| PostgreSQL | 5432 | å…ƒæ•°æ®æ•°æ®åº“ |
| MinIO | 9000/9001 | å¯¹è±¡å­˜å‚¨ |
| æ²™ç›’ | 8888 | ä»£ç æ‰§è¡Œç¯å¢ƒ |

## ğŸ“„ License

MIT License
