# Fast Data Agent

> åŸºäº LangGraph çš„ AI æ•°æ®åˆ†æå¹³å°

## âœ¨ ç‰¹æ€§

- ğŸ¤– **LangGraph Agent** - æ™ºèƒ½æ•°æ®åˆ†æåŠ©æ‰‹
- ğŸ—„ï¸ **å¤šæ•°æ®æºæ”¯æŒ** - MySQL, PostgreSQL, ClickHouse, æ–‡ä»¶ç­‰
- ğŸ“Š **æ™ºèƒ½æ¨è** - è‡ªåŠ¨ç”Ÿæˆåˆ†æä»»åŠ¡æ¨è
- ğŸ’¬ **å¯¹è¯å¼åˆ†æ** - è‡ªç„¶è¯­è¨€é©±åŠ¨çš„æ•°æ®æ¢ç´¢
- ğŸ“ˆ **å¯è§†åŒ–** - Plotly å‰ç«¯å›¾è¡¨æ¸²æŸ“
- ğŸ”’ **å®‰å…¨æ‰§è¡Œ** - Python ä»£ç æ²™ç®±éš”ç¦»

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯ (React + Plotly)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ•°æ®æºç®¡ç†    â”‚  â”‚ åˆ†æä¼šè¯ç•Œé¢  â”‚  â”‚ å›¾è¡¨/è¡¨æ ¼å¯è§†åŒ–      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åç«¯ (FastAPI + LangGraph)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    LangGraph Agent                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Schema åˆ†æå™¨ â”‚  â”‚ SQL/ä»£ç ç”Ÿæˆ  â”‚  â”‚ ä»»åŠ¡æ¨èå™¨   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ•°æ®æºæœåŠ¡    â”‚  â”‚ ä¼šè¯æœåŠ¡      â”‚  â”‚ æ‰§è¡Œå¼•æ“ (æ²™ç®±)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®å±‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚ MinIO        â”‚  â”‚ ç”¨æˆ·æ•°æ®æº            â”‚  â”‚
â”‚  â”‚ (å…ƒæ•°æ®å­˜å‚¨)  â”‚  â”‚ (æ–‡ä»¶å­˜å‚¨)    â”‚  â”‚ (MySQL/PG/æ–‡ä»¶ç­‰)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
fast-data-agent/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/              # API è·¯ç”±
â”‚   â”œâ”€â”€ core/             # é…ç½®ã€å®‰å…¨ã€æ•°æ®åº“
â”‚   â”œâ”€â”€ models/           # SQLAlchemy æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.py           # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ data_source.py    # æ•°æ®æºé…ç½®
â”‚   â”‚   â”œâ”€â”€ uploaded_file.py  # ä¸Šä¼ æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ analysis_session.py  # åˆ†æä¼šè¯
â”‚   â”‚   â”œâ”€â”€ chat_message.py   # å¯¹è¯æ¶ˆæ¯
â”‚   â”‚   â””â”€â”€ task_recommendation.py  # ä»»åŠ¡æ¨è
â”‚   â”œâ”€â”€ schemas/          # Pydantic æ¨¡å‹
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ repositories/     # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°å’Œ Agent å·¥å…·
â”‚   â””â”€â”€ main.py           # åº”ç”¨å…¥å£
â”œâ”€â”€ sandbox_runtime/      # Python æ²™ç›’æœåŠ¡
â”‚   â”œâ”€â”€ main.py           # æ²™ç›’ FastAPI åº”ç”¨
â”‚   â”œâ”€â”€ Dockerfile        # æ²™ç›’å®¹å™¨é•œåƒ
â”‚   â””â”€â”€ requirements.txt  # æ²™ç›’ä¾èµ–
â”œâ”€â”€ scripts/              # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ test_user_flow.py     # ç”¨æˆ·æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ reset_resources.py    # èµ„æºé‡ç½®è„šæœ¬
â”œâ”€â”€ tests/                # æµ‹è¯•ä»£ç 
â”œâ”€â”€ alembic/              # æ•°æ®åº“è¿ç§»
â””â”€â”€ docker-compose.yml    # Docker Compose
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.12+
- PostgreSQL 16+
- MinIO (æˆ– S3 å…¼å®¹å­˜å‚¨)
- OpenAI API Key (æˆ–å…¼å®¹ API)

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£… uvï¼ˆå¦‚æœªå®‰è£…ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# å…‹éš†å¹¶å®‰è£…
git clone <your-repo-url>
cd fast-data-agent
uv sync
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp env.example .env
# ç¼–è¾‘ .env é…ç½®æ•°æ®åº“ã€MinIOã€OpenAI ç­‰
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºè¿ç§»
alembic revision --autogenerate -m "init"

# æ‰§è¡Œè¿ç§»
alembic upgrade head
```

### 5. å¯åŠ¨æœåŠ¡

```bash
make dev
# è®¿é—® http://localhost:8000/docs
```

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹

```
User (ç”¨æˆ·)
â”œâ”€â”€ DataSource[] (æ•°æ®æºé…ç½®)
â”‚   â”œâ”€â”€ æ•°æ®åº“è¿æ¥ (MySQL/PostgreSQL/ClickHouse...)
â”‚   â””â”€â”€ æ–‡ä»¶å¼•ç”¨ -> UploadedFile
â”œâ”€â”€ UploadedFile[] (ä¸Šä¼ æ–‡ä»¶ -> MinIO)
â””â”€â”€ AnalysisSession[] (åˆ†æä¼šè¯)
    â”œâ”€â”€ ChatMessage[] (å¯¹è¯å†å²)
    â”‚   â”œâ”€â”€ ç”¨æˆ·æ¶ˆæ¯
    â”‚   â”œâ”€â”€ AI å›å¤
    â”‚   â””â”€â”€ å·¥å…·è°ƒç”¨ç»“æœ
    â””â”€â”€ TaskRecommendation[] (ä»»åŠ¡æ¨è)
```

## ğŸ”„ æ ¸å¿ƒæµç¨‹

```
1. é…ç½®æ•°æ®æº          2. åˆ›å»ºåˆ†æä¼šè¯           3. å¯¹è¯å¼åˆ†æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ æ·»åŠ æ•°æ®åº“  â”‚  â†’   â”‚ â€¢ é€‰æ‹©æ•°æ®æº      â”‚  â†’   â”‚ â€¢ ç³»ç»Ÿæ¨èåˆ†æä»»åŠ¡   â”‚
â”‚ â€¢ ä¸Šä¼ æ–‡ä»¶   â”‚      â”‚ â€¢ æå– Schema     â”‚      â”‚ â€¢ ç”¨æˆ·è‡ªç”±æé—®       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â€¢ AI ç”Ÿæˆ SQL/ä»£ç    â”‚
                                                â”‚ â€¢ æ‰§è¡Œå¹¶å¯è§†åŒ–ç»“æœ   â”‚
                                                â”‚ â€¢ æ¨èè¿½é—®é—®é¢˜       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â†‘________â†“
                                                        (å¾ªç¯åˆ†æ)
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
make dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
make test             # è¿è¡Œæµ‹è¯•
make check            # ä»£ç è´¨é‡æ£€æŸ¥ (lint + format + type-check)

# æ•°æ®åº“
make db-migrate msg="xxx"  # æ•°æ®åº“è¿ç§»

# æ²™ç›’ç®¡ç†
make sandbox-build    # æ„å»ºæ²™ç›’ Docker é•œåƒ
make sandbox-start    # å¯åŠ¨æ²™ç›’å®¹å™¨
make sandbox-stop     # åœæ­¢æ²™ç›’å®¹å™¨
make sandbox-restart  # é‡å¯æ²™ç›’å®¹å™¨
make sandbox-status   # æŸ¥çœ‹æ²™ç›’çŠ¶æ€
make sandbox-logs     # æŸ¥çœ‹æ²™ç›’æ—¥å¿—

# èµ„æºç®¡ç†
make reset            # é‡ç½®æ‰€æœ‰èµ„æºï¼ˆæ•°æ®åº“ã€MinIOã€æ²™ç›’ï¼‰
```

## ğŸ³ Docker éƒ¨ç½²

```bash
# ä»…åº”ç”¨ï¼ˆä½¿ç”¨å¤–éƒ¨ PostgreSQL/MinIOï¼‰
docker compose up -d app

# å®Œæ•´ç¯å¢ƒï¼ˆåŒ…å« PostgreSQL/MinIOï¼‰
docker compose --profile infra up -d
```

## ğŸ“„ License

MIT License
